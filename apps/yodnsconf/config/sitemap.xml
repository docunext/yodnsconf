<map:sitemap xmlns:map="http://www.nexista.org/sitemap"> 
    <map:prepend>
        <map:script src="lib/php/runtime.php"/>
        <map:xml src="i18n/en_US/yodnsconf.xml"/>
    </map:prepend>

    <map:gate name="index" role="yodnsuser">
        <map:query src="data/sql/zones_get_all.xml"/>
        <map:xsl src="templates/xsl/zones.xsl"/>
    </map:gate>

    <map:gate name="zone-edit" role="yodnsuser">
        <map:if name="//_post">
            <map:true>
                <map:query src="data/sql/zone_update.xml"/>
                <map:action type="redirect" params="{//link_prefix}zone-edit&amp;zone={//_post/zone}"/>
            </map:true>
            <map:false>
            </map:false>
        </map:if>
        <map:query src="data/sql/zone_get_by_id.xml"/>
        <map:xsl src="templates/xsl/zone_edit.xsl"/>
    </map:gate>

    <map:gate name="zone-delete" role="yodnsuser">
        <map:query src="data/sql/zone_delete.xml"/>
        <map:action type="redirect" params="index"/>
    </map:gate>

    <map:gate name="records" role="yodnsuser">
        <map:xml src="data/xml/dns_record_types.xml"/>
        <map:query src="data/sql/zone_get_by_id.xml"/>
        <map:query src="data/sql/records_get_by_zone_id.xml"/>
        <map:xsl src="templates/xsl/records.xsl"/>
    </map:gate>

    <map:gate name="record-edit" role="yodnsuser">
        <map:if name="//_post">
            <map:true>
                <map:query src="data/sql/record_update.xml"/>
                <map:action type="redirect" params="{//link_prefix}record-edit&amp;id={//_post/id}&amp;zone={//_post/zone}"/>
            </map:true>
            <map:false>
            </map:false>
        </map:if>
        <map:xml src="data/xml/dns_record_types.xml"/>
        <map:query src="data/sql/zone_get_by_id.xml"/>
        <map:query src="data/sql/record_get_by_id.xml"/>
        <map:xsl src="templates/xsl/record_edit.xsl"/>
    </map:gate>
</map:sitemap>